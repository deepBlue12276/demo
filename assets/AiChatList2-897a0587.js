import{_ as H,r as c,t as R,m as S,o as a,c as o,s as F,b as u,F as _,z as x,y as p,l as g,w as V,v as P,x as I,p as $,k as q,q as z}from"./index-2ed89667.js";import{_ as D,a as N}from"./Frame 427320860-3d5958e4.js";import{_ as E,a as j}from"./Box Wrapper-5add57c3.js";import{_ as C}from"./Group 1321315262-1c50344e.js";const k=l=>($("data-v-8834312c"),l=l(),q(),l),G={key:0,class:"msg-box-h"},J={class:"msg"},K=k(()=>u("img",{src:D,class:"avatar",alt:""},null,-1)),O={key:1,class:"msg-box-a"},Q=k(()=>u("img",{src:N,class:"avatar",alt:""},null,-1)),U={key:0,class:"ai-text"},W=["src","onClick","onMousemove"],X={key:0,src:E,alt:""},Y={key:1,src:j,alt:""},Z=k(()=>u("input",{type:"text",placeholder:"请输入您的问题（可以是一句话或词组）"},null,-1)),ee={key:0,class:"ai-icon",src:C,alt:""},se={__name:"AiChatList2",props:{msgList:{type:Array,required:!0},isHiddenMenu:{type:Boolean,default:!0},showRobot:{type:Boolean,default:!1}},emits:["imgClick","handleMousemove","complete","renderFinish","handleRobot"],setup(l,{expose:b,emit:T}){c(""),c([]),c(!1);const A=l,d=c([]),{msgList:i}=R(A);S(()=>i.value.length,async t=>{const n=t-1;if(console.log(t,d.value.length),n>d.value.length)for(const e of i.value)await L(e);else L(i.value[n])},{immediate:!0});async function L(t){const n=c([]),e=c({userMsgLoad:"",displayedItems:n.value});d.value.push(e.value);let r=0;const m=setInterval(()=>{var s;r<((s=t.userMsg)==null?void 0:s.length)?(e.value.userMsgLoad+=t.userMsg[r],r++):(clearInterval(m),e.value.showAi=!0,console.log("loadMsgList"),M())},100);await new Promise(s=>setTimeout(s,1e3));async function M(){if(t.aiMsgList&&t.aiMsgList.length)for(const s of t.aiMsgList){const w=c("");if(n.value.push({type:s.type,displayedValue:w}),s.type==="text")for(const h of s.value)w.value+=h,await z(),await new Promise(B=>setTimeout(B,50));else w.value=s.value,await new Promise(h=>setTimeout(h,200));await new Promise(h=>setTimeout(h,200)),f(300),d.value.length===i.value.length&&d.value[d.value.length-1].displayedItems.length===i.value[i.value.length-1].aiMsgList.length&&setTimeout(()=>{v("renderFinish",i.value.length)},200)}else v("renderFinish",i.value.length);f(1e4)}}const v=T,y=c(),f=t=>{y.value&&(y.value.scrollTop=t)};return b({scrollTo:f}),(t,n)=>(a(),o("div",{class:p([{wide:!l.isHiddenMenu},"box"])},[F(t.$slots,"other",{},void 0,!0),u("div",{ref_key:"scrollBox",ref:y,class:"scroll-wrap"},[(a(!0),o(_,null,x(d.value,(e,r)=>(a(),o(_,{key:r},[e.userMsgLoad?(a(),o("div",G,[u("div",J,I(e.userMsgLoad),1),K])):g("",!0),e.showAi&&(e!=null&&e.displayedItems.length)?(a(),o("div",O,[Q,u("div",{class:p(["msg",{msg_wide:!l.isHiddenMenu}])},[(a(!0),o(_,null,x(e.displayedItems,(m,M)=>(a(),o(_,{key:M},[m.type==="text"?(a(),o("div",U,I(m.displayedValue),1)):m.type==="img"?(a(),o("img",{key:1,src:m.displayedValue,alt:"Image",class:p(`image_${r}`),onClick:s=>v("imgClick",{e:s,index:r}),onMousemove:s=>v("handleMousemove",{e:s,index:r})},null,42,W)):g("",!0)],64))),128))],2)])):g("",!0)],64))),128))],512),u("div",{class:p(["input",{wide_input:!l.isHiddenMenu}])},[l.isHiddenMenu?(a(),o("img",X)):(a(),o("img",Y)),Z],2),l.isHiddenMenu?(a(),o("img",ee)):g("",!0),V(u("img",{class:"robot",src:C,alt:"",onClick:n[0]||(n[0]=e=>v("handleRobot"))},null,512),[[P,l.showRobot]])],2))}},ie=H(se,[["__scopeId","data-v-8834312c"]]);export{ie as A};
