import{_ as B,a as H}from"./Frame 427320860-93059560.js";import{_ as V,a as P}from"./Box Wrapper-8fbc4c14.js";/* empty css                                                                   */import{_ as S,r as l,t as q,m as z,o as s,c as t,b as n,F as p,z as M,y as _,x,l as L,p as F,k as N,q as R}from"./index-bc58108a.js";const w=a=>(F("data-v-35631abd"),a=a(),N(),a),D={class:"msg-box-h"},E={class:"msg"},$=w(()=>n("img",{src:B,class:"avatar",alt:""},null,-1)),j={key:0,class:"msg-box-a"},G=w(()=>n("img",{src:H,class:"avatar",alt:""},null,-1)),J={key:0,class:"ai-text"},K=["src","onClick"],O={key:0,src:V,alt:""},Q={key:1,src:P,alt:""},U=w(()=>n("input",{type:"text",placeholder:"请输入您的问题（可以是一句话或词组）"},null,-1)),W={__name:"AiChatList",props:{msgList:{type:Array,required:!0},isHiddenMenu:{type:Boolean,default:!0}},emits:["imgClick","complete"],setup(a,{expose:I,emit:C}){l(""),l([]),l(!1);const T=a,m=l([]),{msgList:v}=q(T);z(()=>v.value.length,async o=>{const r=o-1;if(console.log(o,m.value.length),r>m.value.length)for(const e of v.value)await k(e);else k(v.value[r])},{immediate:!0});async function k(o){const r=l([]),e=l({userMsgLoad:"",displayedItems:r.value});m.value.push(e.value);let c=0;const d=setInterval(()=>{c<o.userMsg.length?(e.value.userMsgLoad+=o.userMsg[c],c++):(clearInterval(d),e.value.showAi=!0,console.log("loadMsgList"),y())},100);await new Promise(i=>setTimeout(i,1e3));async function y(){for(const i of o.aiMsgList){const f=l("");if(r.value.push({type:i.type,displayedValue:f}),i.type==="text")for(const u of i.value)f.value+=u,await R(),await new Promise(A=>setTimeout(A,50));else f.value=i.value,await new Promise(u=>setTimeout(u,200));await new Promise(u=>setTimeout(u,200)),h(300)}h(1e4)}}const b=C,g=l(),h=o=>{g.value&&(g.value.scrollTop=o)};return I({scrollTo:h}),(o,r)=>(s(),t("div",{class:_([{wide:!a.isHiddenMenu},"box"])},[n("div",{ref_key:"scrollBox",ref:g,class:"scroll-wrap"},[(s(!0),t(p,null,M(m.value,(e,c)=>(s(),t(p,{key:c},[n("div",D,[n("div",E,x(e.userMsgLoad),1),$]),e.showAi&&(e!=null&&e.displayedItems.length)?(s(),t("div",j,[G,n("div",{class:_(["msg",{msg_wide:!a.isHiddenMenu}])},[(s(!0),t(p,null,M(e.displayedItems,(d,y)=>(s(),t(p,{key:y},[d.type==="text"?(s(),t("div",J,x(d.displayedValue),1)):d.type==="img"?(s(),t("img",{key:1,src:d.displayedValue,alt:"Image",class:_(`image_${c}`),onClick:i=>b("imgClick",{e:i,index:c})},null,10,K)):L("",!0)],64))),128))],2)])):L("",!0)],64))),128))],512),n("div",{class:_(["input",{wide_input:!a.isHiddenMenu}])},[a.isHiddenMenu?(s(),t("img",O)):(s(),t("img",Q)),U],2)],2))}},se=S(W,[["__scopeId","data-v-35631abd"]]);export{se as A};
