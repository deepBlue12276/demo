import{_ as B,a as H}from"./Frame 427320860-3d5958e4.js";import{_ as F,a as V}from"./Box Wrapper-5add57c3.js";import{_ as P}from"./Group 1321315262-1c50344e.js";import{_ as S,r,t as q,m as z,o as t,c as a,b as c,F as h,z as x,y as p,l as w,x as I,p as N,k as R,q as $}from"./index-ff65927a.js";const k=i=>(N("data-v-f3b1d167"),i=i(),R(),i),D={class:"msg-box-h"},E={class:"msg"},j=k(()=>c("img",{src:B,class:"avatar",alt:""},null,-1)),G={key:0,class:"msg-box-a"},J=k(()=>c("img",{src:H,class:"avatar",alt:""},null,-1)),K={key:0,class:"ai-text"},O=["src","onClick","onMousemove"],Q={key:0,src:F,alt:""},U={key:1,src:V,alt:""},W=k(()=>c("input",{type:"text",placeholder:"请输入您的问题（可以是一句话或词组）"},null,-1)),X={key:0,class:"ai-icon",src:P,alt:""},Y={__name:"AiChatList2",props:{msgList:{type:Array,required:!0},isHiddenMenu:{type:Boolean,default:!0}},emits:["imgClick","handleMousemove","complete","renderFinish"],setup(i,{expose:C,emit:T}){r(""),r([]),r(!1);const b=i,d=r([]),{msgList:o}=q(b);z(()=>o.value.length,async s=>{const u=s-1;if(console.log(s,d.value.length),u>d.value.length)for(const e of o.value)await L(e);else L(o.value[u])},{immediate:!0});async function L(s){const u=r([]),e=r({userMsgLoad:"",displayedItems:u.value});d.value.push(e.value);let n=0;const m=setInterval(()=>{n<s.userMsg.length?(e.value.userMsgLoad+=s.userMsg[n],n++):(clearInterval(m),e.value.showAi=!0,console.log("loadMsgList"),f())},100);await new Promise(l=>setTimeout(l,1e3));async function f(){if(s.aiMsgList&&s.aiMsgList.length)for(const l of s.aiMsgList){const M=r("");if(u.value.push({type:l.type,displayedValue:M}),l.type==="text")for(const _ of l.value)M.value+=_,await $(),await new Promise(A=>setTimeout(A,50));else M.value=l.value,await new Promise(_=>setTimeout(_,200));await new Promise(_=>setTimeout(_,200)),y(300),d.value.length===o.value.length&&d.value[d.value.length-1].displayedItems.length===o.value[o.value.length-1].aiMsgList.length&&setTimeout(()=>{v("renderFinish",o.value.length)},200)}else v("renderFinish",o.value.length);y(1e4)}}const v=T,g=r(),y=s=>{g.value&&(g.value.scrollTop=s)};return C({scrollTo:y}),(s,u)=>(t(),a("div",{class:p([{wide:!i.isHiddenMenu},"box"])},[c("div",{ref_key:"scrollBox",ref:g,class:"scroll-wrap"},[(t(!0),a(h,null,x(d.value,(e,n)=>(t(),a(h,{key:n},[c("div",D,[c("div",E,I(e.userMsgLoad),1),j]),e.showAi&&(e!=null&&e.displayedItems.length)?(t(),a("div",G,[J,c("div",{class:p(["msg",{msg_wide:!i.isHiddenMenu}])},[(t(!0),a(h,null,x(e.displayedItems,(m,f)=>(t(),a(h,{key:f},[m.type==="text"?(t(),a("div",K,I(m.displayedValue),1)):m.type==="img"?(t(),a("img",{key:1,src:m.displayedValue,alt:"Image",class:p(`image_${n}`),onClick:l=>v("imgClick",{e:l,index:n}),onMousemove:l=>v("handleMousemove",{e:l,index:n})},null,42,O)):w("",!0)],64))),128))],2)])):w("",!0)],64))),128))],512),c("div",{class:p(["input",{wide_input:!i.isHiddenMenu}])},[i.isHiddenMenu?(t(),a("img",Q)):(t(),a("img",U)),W],2),i.isHiddenMenu?(t(),a("img",X)):w("",!0)],2))}},ae=S(Y,[["__scopeId","data-v-f3b1d167"]]);export{ae as A};
