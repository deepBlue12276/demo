import{_ as H,a as F}from"./Frame 427320860-93059560.js";import{_ as V,a as b}from"./Box Wrapper-8fbc4c14.js";import{_ as P}from"./Group 1321315262-022963cb.js";import{_ as S,r as n,t as $,m as q,o as t,c as a,b as c,F as p,z as L,y as h,l as w,x as I,p as z,k as N,q as R}from"./index-bc58108a.js";const ae="/demo/assets/2024092615371-f28d6f99.png";const k=i=>(z("data-v-ec51264a"),i=i(),N(),i),D={class:"msg-box-h"},E={class:"msg"},j=k(()=>c("img",{src:H,class:"avatar",alt:""},null,-1)),G={key:0,class:"msg-box-a"},J=k(()=>c("img",{src:F,class:"avatar",alt:""},null,-1)),K={key:0,class:"ai-text"},O=["src","onClick"],Q={key:0,src:V,alt:""},U={key:1,src:b,alt:""},W=k(()=>c("input",{type:"text",placeholder:"请输入您的问题（可以是一句话或词组）"},null,-1)),X={key:0,class:"ai-icon",src:P,alt:""},Y={__name:"AiChatList2",props:{msgList:{type:Array,required:!0},isHiddenMenu:{type:Boolean,default:!0}},emits:["imgClick","complete","renderFinish"],setup(i,{expose:C,emit:T}){n(""),n([]),n(!1);const A=i,r=n([]),{msgList:l}=$(A);q(()=>l.value.length,async s=>{const u=s-1;if(console.log(s,r.value.length),u>r.value.length)for(const e of l.value)await x(e);else x(l.value[u])},{immediate:!0});async function x(s){const u=n([]),e=n({userMsgLoad:"",displayedItems:u.value});r.value.push(e.value);let d=0;const _=setInterval(()=>{d<s.userMsg.length?(e.value.userMsgLoad+=s.userMsg[d],d++):(clearInterval(_),e.value.showAi=!0,console.log("loadMsgList"),f())},100);await new Promise(o=>setTimeout(o,1e3));async function f(){if(s.aiMsgList&&s.aiMsgList.length)for(const o of s.aiMsgList){const M=n("");if(u.value.push({type:o.type,displayedValue:M}),o.type==="text")for(const m of o.value)M.value+=m,await R(),await new Promise(B=>setTimeout(B,50));else M.value=o.value,await new Promise(m=>setTimeout(m,200));await new Promise(m=>setTimeout(m,200)),y(300),r.value.length===l.value.length&&r.value[r.value.length-1].displayedItems.length===l.value[l.value.length-1].aiMsgList.length&&setTimeout(()=>{v("renderFinish",l.value.length)},200)}else v("renderFinish",l.value.length);y(1e4)}}const v=T,g=n(),y=s=>{g.value&&(g.value.scrollTop=s)};return C({scrollTo:y}),(s,u)=>(t(),a("div",{class:h([{wide:!i.isHiddenMenu},"box"])},[c("div",{ref_key:"scrollBox",ref:g,class:"scroll-wrap"},[(t(!0),a(p,null,L(r.value,(e,d)=>(t(),a(p,{key:d},[c("div",D,[c("div",E,I(e.userMsgLoad),1),j]),e.showAi&&(e!=null&&e.displayedItems.length)?(t(),a("div",G,[J,c("div",{class:h(["msg",{msg_wide:!i.isHiddenMenu}])},[(t(!0),a(p,null,L(e.displayedItems,(_,f)=>(t(),a(p,{key:f},[_.type==="text"?(t(),a("div",K,I(_.displayedValue),1)):_.type==="img"?(t(),a("img",{key:1,src:_.displayedValue,alt:"Image",class:h(`image_${d}`),onClick:o=>v("imgClick",{e:o,index:d})},null,10,O)):w("",!0)],64))),128))],2)])):w("",!0)],64))),128))],512),c("div",{class:h(["input",{wide_input:!i.isHiddenMenu}])},[i.isHiddenMenu?(t(),a("img",Q)):(t(),a("img",U)),W],2),i.isHiddenMenu?(t(),a("img",X)):w("",!0)],2))}},ie=S(Y,[["__scopeId","data-v-ec51264a"]]);export{ie as A,ae as _};
